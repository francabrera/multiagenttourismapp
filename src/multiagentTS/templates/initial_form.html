{% extends "base.html" %}
{% block head %}
    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=ABQIAAAAH0IStyKYvGwZXcreV0mSshT2yXp_ZAY8_ufC3CFXhHIE1NvwkxSfhDz6JAIkpuDoLpccw_MDXkcQMg" type="text/javascript"></script>

    <script type="text/javascript">

    var map;
    var gdir;
    var geocoder = null;
    var addressMarker;
    
    function initialize() {
      if (GBrowserIsCompatible()) {      
        map = new GMap2(document.getElementById("map_canvas"));
        gdir = new GDirections(map, null);
        GEvent.addListener(gdir, "load", onGDirectionsLoad);
        GEvent.addListener(gdir, "error", handleErrors);
    
        setDirections("Santa Cruz de Tenerife, Tenerife, España", "San Cristóbal de La Laguna, Tenerife, España", "es_ES");
      }
    }
    
    function setDirections(fromAddress, toAddress, locale) {
      gdir.load("from: " + fromAddress + " to: " + toAddress,
                { "locale": locale });
    }
    
    function handleErrors(){
      //boton = document.getElementById("submit");
      //boton.style.hidden = true;
      alert("Direcciones erróneas o desconocidas. \nError code: " + gdir.getStatus().code);
    }
    
    function onGDirectionsLoad(){
        // Use this function to access information about the latest load()
        // results.
    
        // e.g.
        // document.getElementById("getStatus").innerHTML = gdir.getStatus().code;
      // and yada yada yada...
    }

    </script>
{% endblock %}
{% block title %}Index {% endblock %}
{% block bodyoptions %} 
	 onload="initialize()"
	 onunload="GUnload()" style="font-family: Arial;border: 0 none;"
{% endblock %}
{% block content %}
<!-- <h1>Sistema Multi-Agente de información turística</h1>
	<hr/>
	<form action="thanks" method="post">
	{% csrf_token %}
	<table>
		{{ form.as_table }}
		
	</table>
		<input type="submit" value="Enviar">
	</form> -->
	<h2>Maps API Directions Illustrated</h2>
	<form action="user/main" name="formulario">
      <table>
        <tr>
          <th align="right">From:&nbsp;</th>
          <td>
            <input type="text" size="25" id="fromAddress" name="from" value="Santa Cruz de Tenerife, Tenerife"/>
          </td>
        </tr>
        <tr>
          <th align="right">&nbsp;&nbsp;To:&nbsp;</th>
          <td align="right"><input type="text" size="25" id="toAddress" name="to" value="San Cristóbal de La Laguna, Tenerife, España" />
          </td>
        </tr>
        <tr>
          <th>Language:&nbsp;</th>
          <td colspan="3">
            <select id="locale" name="locale">
              <option value="en" >English</option>
              <option value="es" selected>Spanish</option>
            </select>
          </td>
        </tr>
        <tr><td><input name="comprobar" type="submit" value="COMPROBAR" onclick="setDirections(formulario.from.value, formulario.to.value, formulario.locale.value); return false" /></td></tr>
        <tr><td><input name="submit" type="submit" value="IR" /></td></tr>
     </table>
    </form>
    <br/>
    <div id="map_canvas" style="width: 0px; height: 0px"></div>
{% endblock %}

